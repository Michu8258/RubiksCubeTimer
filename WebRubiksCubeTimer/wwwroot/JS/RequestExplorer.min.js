function GetContent(n){let t=$("#StartDate").val(),i=$("#EndDate").val(),r=$("#TopicFilter").val();$.get("/Requests/GetRequestsData",{startDate:t,endDate:i,topicContains:r,page:n},function(n){if(n.isFaulted){let t={};t.responseText=JSON.stringify(n);DisplayMessages(t)}else PopulateRequests(n.jsonData)})}function AddRequest(n){let t='<div class="bg-request rounded px-3 py-2 my-2">'+CreateRequestHeading(n)+CreateRequest(n)+CreateResponses(n)+CreateAddResponseButton(n)+CreateRequestFooter(n)+"<\/div>";$("#Requests").append(t)}function CreateAddResponseButton(n){return'<div class="d-flex flex-row-reverse py-1 my-1"><button type="button" class="btn btn-sm btn-dark text-white d-flex float-right"onclick="AddNewResponse(\''+n.request.identity+"')\">Add response<\/button><\/div > "}function CreateRequestFooter(n){return'<div class="row row-cols-2"><div class="col-9"><span>Replies amount: <strong>'+n.request.repliesAmount+"<\/strong><\/span><span> Status: <strong>"+GetStatus(n.request.caseClosed)+"<\/strong><\/span><span> Last update by: <strong>"+GetLastResponseCreator(n.request.newChangesByAdmin,n.request.newChangesByUser)+'<\/strong><\/span><\/div><div class="col-3"><button type="button" class="btn btn-sm btn-dark text-white d-flex float-right"onclick="ChangeRequestState(\''+n.request.identity+"', '"+n.request.caseClosed+"')\">Change state<\/button>"}function ChangeRequestState(n,t){idOfRequestForStateChange=n;$("#CurrentRequestState").text(GetStatus(t));$('input[name="state"]').prop("checked",!1);$("#ChangeStateModal").modal("show")}$(document).ready(function(){showResponsesFor=0;idOfRequestForStateChange=0;GetContent(1)});$("#ConfirmAddResponse").click(function(){showResponsesFor=idOfRequestForResponse;let n=$("#NewResponseText").val();$.post("/Requests/AddResponseAdmin",{requestId:idOfRequestForResponse,message:n},function(n){if(n.isFaulted){let t={};t.responseText=JSON.stringify(n);DisplayMessages(t)}else GetContent(currentPage),RefreshRequestsSidebar()})});$("#ConfirmStateChange").click(function(){if($("input[name='state']:checked").val()){let n=$("#NewStateClosed").is(":checked"),t=idOfRequestForStateChange;idOfRequestForStateChange=0;$("#ChangeStateModal").modal("hide");$.post("/Requests/ChangeRequestStatus",{requestId:t,closed:n},function(n){if(n.isFaulted){let t={};t.responseText=JSON.stringify(n);DisplayMessages(t)}else{let n=currentPage;pageRecordsAmount==1&&currentPage>1&&n--;GetContent(n);RefreshRequestsSidebar()}})}});
function LimitCharAmount(n,t){let i=n.val();return i!=undefined?(i.length>t&&n.val(n.val().substring(0,t)),n.val().length+"/"+t):"0/0"}function EraseRequests(){$("#Requests").empty()}function PopulateRequests(n){if(amountOfPages=n.pagination.amountOfPages,currentPage=n.pagination.currentPage,pageSize=n.pagination.pageSize,pageRecordsAmount=n.requests.length,maxResponseLength=n.maxResponseLength,EraseRequests(),n.requests.length>0)for(var t=0;t<n.requests.length;t++)AddRequest(n.requests[t]);else CreateNoContentDiv();CreatePagination()}function CreateNoContentDiv(){$("#Requests").append('<div class="bg-warning rounded px-3 py-2 my-2 text-center">No requests to display<\/div>')}function CreateRequestHeading(n){return'<div class="row row-cols-2"><div class="col-9"><h6><strong>'+n.request.userName+"<\/strong><\/h6><label>"+n.request.creationTime.substring(0,19).replace("T"," ")+'<\/label><\/div><div class="col-3"><button type="button" class="btn btn-sm btn-dark text-white d-flex float-right"onclick="ShowHideResponses(\''+n.request.identity+"')\" >Replies<\/button > <\/div><\/div>"}function CreateRequest(n){return'<div class="bg-message rounded px-3 py-2 my-1"><h6>'+n.request.topic+"<\/h6><div>"+n.request.message+"<\/div><\/div>"}function CreateResponses(n){var i="",t;if(n.responses.length>0)for(t=0;t<n.responses.length;t++)i+=CreateSingleResponse(n.responses[t]);return n.request.identity==showResponsesFor?(showResponsesFor=0,'<div id="Responses'+n.request.identity+'">'+i+"<\/div>"):'<div id="Responses'+n.request.identity+'" style="display: none;">'+i+"<\/div>"}function CreateSingleResponse(n){return'<div class="bg-response rounded px-3 py-2 my-2"><h6>'+n.userName+" on "+n.responseTime.substring(0,19).replace("T"," ")+"<\/h6><div>"+n.message+"<\/div><\/div>"}function GetStatus(n){return n==!1?"Opened":"Closed"}function GetLastResponseCreator(n,t){return n==!0?"Admin/Modarator":t==!0?"Requester":"Unknown"}function ShowHideResponses(n){$("#Responses"+n).toggle()}function ChangePage(n){GetContent(n)}function AddNewResponse(n){idOfRequestForResponse=n;$("#NewResponseText").val("");$("#MessageCharAmount").text(LimitCharAmount($("#NewResponseText"),maxResponseLength));$("#AddResponseModal").modal("show")}let maxTopicLength,maxMessageLength,maxResponseLength,idOfRequestForResponse,idOfRequestForStateChange,showResponsesFor;$(document).ready(function(){maxTopicLength=$("#TopicMaxLength").val();maxMessageLength=$("#MessageMaxLength").val();$("#TopicAmount").text(LimitCharAmount($("#Topic"),maxTopicLength));$("#MessageAmount").text(LimitCharAmount($("#Message"),maxMessageLength))});$("#Topic").on("input",function(){$("#TopicAmount").text(LimitCharAmount($("#Topic"),maxTopicLength))});$("#Message").on("input",function(){$("#MessageAmount").text(LimitCharAmount($("#Message"),maxMessageLength))});$("#StartTimeStamp").datetimepicker({format:"L"});$("#EndTimeStamp").datetimepicker({format:"L"});$("#FilterButton").click(function(){GetContent(1)});$("#NewResponseText").on("input",function(){$("#MessageCharAmount").text(LimitCharAmount($("#NewResponseText"),maxResponseLength))});
function LockInterface(){userInterfaceLocked=!0}function UnlockInterface(){userInterfaceLocked=!1}function CollectDefaultScrambleValues(){defaultLength=$("#CurrentScramble_Scramble_DefaultScrambleLength").val();scrambleId=$("#SelectedScrambleId").val();eliminateDuplicates=$("#CurrentScramble_Scramble_EliminateDuplicates").is(":checked");minLength=$("#MinMovesAmount").text();maxLength=$("#MaxMovesAmount").text()}function RestoreDefaults(){$("#CurrentScramble_Scramble_DefaultScrambleLength").val(defaultLength);$("#SelectedScrambleId").val(scrambleId);$("#CurrentScramble_Scramble_EliminateDuplicates").prop("checked",eliminateDuplicates);$("#CurrentScramble_Scramble_EliminateDuplicates").val(eliminateDuplicates);$("#MinMovesAmount").text(minLength);$("#MaxMovesAmount").text(maxLength)}function GetScrambles(){let n=$("#CategoryID").val();$.get("/Timer/GetScrambles/",{categoryId:n},function(n){scrambles=n;for(var t=0;t<n.length;t++)n[t].scramble.identity==scrambleId&&(GetMoves(n[t].moves),allowRegenerate=n[t].scramble.allowRegenerate,allowRegenerate&&AddRegenerateButton(),Scramble())})}function GetMoves(n){moves=[];for(var t=0;t<n.length;t++)moves.push(n[t].move)}function CheckScrambleLength(){let t=parseInt($("#MinMovesAmount").text()),i=parseInt($("#MaxMovesAmount").text()),n=$("#CurrentScramble_Scramble_DefaultScrambleLength").val();return n>=t&&n<=i?!0:!1}function LoadScramble(n){for(var t=0;t<scrambles.length;t++)if(scrambles[t].scramble.identity==n){minLength=scrambles[t].scramble.minimumScrambleLength;maxLength=scrambles[t].scramble.maximumScrambleLength;defaultLength=scrambles[t].scramble.defaultScrambleLength;scrambleId=scrambles[t].scramble.identity;eliminateDuplicates=scrambles[t].scramble.eliminateDuplicates;allowRegenerate=scrambles[t].scramble.allowRegenerate;$("#TopWallColor").text(scrambles[t].scramble.topColor);$("#FrontWallColor").text(scrambles[t].scramble.frontColor);GetMoves(scrambles[t].moves);RestoreDefaults();RemoveRegenerateButton();scrambles[t].scramble.allowRegenerate&&AddRegenerateButton();Scramble();break}}function CreateScrambleContent(){$("#ScrambleContainer").append('<div class="row row-cols-2 bg-response rounded mx-1 py-1"><div class="col-10"><label class="d-flex justify-content-center align-items-center my-2 py-0" id="ScrambleLabel"><\/label><\/div><div class="col-2 d-flex justify-content-center align-items-center" id="RegenerateDiv"><\/div><\/div>')}function DeleteScrambleContent(){$("#ScrambleContainer").empty()}function AddRegenerateButton(){$("#RegenerateDiv").append('<button type="button" class="btn btn-sm btn-dark text-white" id="RegenerateButton" onclick="Scramble()">Re-genereate<\/button>')}function RemoveRegenerateButton(){$("#RegenerateDiv").empty()}function GenerateScramble(n,t){var i="",u="",r;if(n<1)return i;if(moves.length<1)return"No moves";if(moves.length==1){for(r=0;r<n;r++)i+=moves[0]+" ";return i.slice(0,-1),i}for(r=0;r<n;r++){let n=!0;while(n){let r=moves[Math.floor(Math.random()*moves.length)];t?r===u?n=!0:(n=!1,i+=r+" ",u=r):(n=!1,i+=r+" ",u=r)}}return i.slice(0,-1),i}function Scramble(){if(userInterfaceLocked===!1&&scrambles.length>0&&moves.length>0){let n=GenerateScramble(defaultLength,eliminateDuplicates);$("#ScrambleLabel").text(n)}}function GetCurrentScramble(){return $("#ScrambleLabel").length?$("#ScrambleLabel").text():""}function EnableModalInputs(n){n==!0?$("#CurrentScramble_Scramble_DefaultScrambleLength").prop("readonly",!1):$("#CurrentScramble_Scramble_DefaultScrambleLength").prop("readonly",!0)}let minLength,maxLength,defaultLength,scrambleId,eliminateDuplicates,moves=[],scrambles={},allowRegenerate,userInterfaceLocked=!1,previosMovesAmount;$(document).ready(function(){$("#ScrambleToolsButton").length&&$("#ScramblesModal").length&&(CollectDefaultScrambleValues(),CreateScrambleContent(),GetScrambles())});$("#ScrambleToolsButton").click(function(){userInterfaceLocked===!1&&(previosMovesAmount=$("#CurrentScramble_Scramble_DefaultScrambleLength").val(),$("#ScramblesModal").modal("show"))});$("#ScrambleCancelButton").click(function(){userInterfaceLocked===!1&&RestoreDefaults()});$("#SelectedScrambleId").change(function(){if(userInterfaceLocked===!1){let n=$("#SelectedScrambleId").val();LoadScramble(n);EnableModalInputs(allowRegenerate);previosMovesAmount=defaultLength}});$("#ScrambleConfirmButton").click(function(){userInterfaceLocked===!1&&(CheckScrambleLength()==!0?(CollectDefaultScrambleValues(),$("#CurrentScramble_Scramble_DefaultScrambleLength").val()!=previosMovesAmount&&Scramble(),$("#ScramblesModal").modal("hide")):$("#CurrentScramble_Scramble_DefaultScrambleLength").val(defaultLength))});
function EraseTableContent(){let n=document.getElementById("RolesTable"),t=n.rows.length-1;if(t>0)for(var i=0;i<t;i++)n.deleteRow(1)}function PopulateRolesTable(){$.getJSON("GetAllRoles",function(n){if(n.length==0)tableRow=$("<tr>"),tableRow.append('<td colspan="3" class="align-middle text-center text-dark">No roles defined<\/td>'),tableRow.append("<\/tr>"),$("#RolesTable").append(tableRow);else{let i;for(var t=0;t<n.length;t++)i=t%2==1?$('<tr class="bg-light">'):$("<tr>"),i.append('<td class="align-middle">'+n[t].id+"<\/td>"),i.append('<td class="align-middle">'+n[t].name+"<\/td>"),i.append('<td><a class="align-middle btn btn-sm btn-danger text-white my-1" onclick="ConfirmModal(\''+n[t].id+"', '"+n[t].name+"')\">Delete<\/a><\/td>"),i.append("<\/tr>"),$("#RolesTable").append(i)}})}function ConfirmModal(n,t){$("#DeleteModalHeader").html("Please confirm");$("#DeleteModalBody").html("");let r=document.getElementById("DeleteModalBody"),u=document.createElement("div");u.innerHTML='Are you sure you want to fully delete role "'+t+'"?';let f=document.createElement("div");f.innerHTML="This operation cannot be reverted.";let i=document.createElement("input");i.setAttribute("type","hidden");i.setAttribute("id","DeleteRoleID");i.setAttribute("value",n);r.append(u);r.append(f);r.append(i);$("#DeleteRolesModal").modal("show")}function RoleDeletionConfirmed(){let n=document.getElementById("DeleteRoleID").value;DeleteRole(n,function(){$("#DeleteRolesModal").modal("hide");EraseTableContent();PopulateRolesTable()})}function DeleteRole(n,t){$.ajax({url:"/RolesAdmin/DeleteRole",contentType:"application/json",type:"POST",data:JSON.stringify(n),error:function(){alert("Error while trying to delete role.")},success:function(){t()}})}$(document).ready(function(){EraseTableContent();PopulateRolesTable()});
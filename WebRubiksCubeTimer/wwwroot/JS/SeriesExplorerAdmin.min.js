function InsertAdminButtons(n){return'<td><button class="btn badge badge-danger text-white" onclick="DeleteSerie(\''+n.identity+"', '"+n.startTimeStamp+"',  '"+currentPage+'\')">Delete<\/button><\/td><td><button class="btn badge badge-primary text-white" onclick="ModifySerie(\''+n.identity+"')\">Manage<\/button><\/td>"}function DeleteSerie(n,t,i){currentPage=i;$("#SerieToDelete").text("Identity: "+n+", Date and time: "+t);$("#SerieToDeleteId").val(n);$("#DeleteSerieModal").modal("show")}function HandleSerieDeleteResponse(){let n=currentPage;pageRecordsAmount==1&&currentPage>1&&n--;GetSeriesData(n)}function ModifySerie(n){let t=$("#UserId").val();$.get("/Series/GetSerieChartData",{id:t,serieId:n},function(n){ResponseCheck(n,HandleSerieModificationData)})}function HandleSerieModificationData(n){$("#ModifiedSerieId").val(n.serie.identity);$("#SerieModifId").text(" ("+n.serie.identity+")");PopulateSolvesTable(n.solves);$("#ModifyTimesModal").modal("show")}function PopulateSolvesTable(n){if($("#SerieModifBody").empty(),solvesIDs=[],n.length<1)AddNoSolvesRow();else for(var t=0;t<n.length;t++)AddSingleSolveToTable(n[t],t+1)}function AddNoSolvesRow(){$("#SerieModifBody").append('<tr><td class="align-middle text-center" colspan="11">No data to display<\/td><\/tr>')}function AddSingleSolveToTable(n,t){solvesIDs.push(n.identity);$("#SerieModifBody").append('<tr><td class="align-middle">'+t+'<\/td><td class="align-middle">'+n.identity+'<\/td><td class="align-middle">'+n.finishTimeSpan.substring(0,19).replace("T"," ")+'<\/td><td class="align-middle">'+GetTimefromMiliseconds(n.duration.totalMilliseconds)+'<\/td><td class="align-middle"><input id="NewDuration'+n.identity+'" placeholder="00:00:00.000" oninput="VerifyTime('+n.identity+', this.value)" type="text"/><\/td><td class="align-middle">'+BoolToYN(n.dnf)+'<\/td><td class="align-middle"><input id="NewDNF'+n.identity+'" type="checkbox"/><\/td><td class="align-middle">'+BoolToYN(n.penaltyTwoSeconds)+'<\/td><td class="align-middle"><input id="NewPenalty'+n.identity+'" type="checkbox"/><\/td><td class="align-middle"><input id="NewModify'+n.identity+'" type="checkbox"/><\/td><td class="align-middle"><input id="NewDelete'+n.identity+'" type="checkbox"/><\/td><\/tr>')}function CollectChangedData(){if(solvesIDs.length>0){let i=$("#ModifiedSerieId").val(),r=$("#UserId").val(),t=[];for(var n=0;n<solvesIDs.length;n++){let u={};u.identity=solvesIDs[n];u.serieId=i;u.userId=r;u.newDuration=$("#NewDuration"+solvesIDs[n]).val();u.newDnf=$("#NewDNF"+solvesIDs[n]).prop("checked");u.newPenalty=$("#NewPenalty"+solvesIDs[n]).prop("checked");u.newModify=$("#NewModify"+solvesIDs[n]).prop("checked");u.newDelete=$("#NewDelete"+solvesIDs[n]).prop("checked");t.push(u)}return t}return null}function HandleModificationResponse(){ModifySerie($("#ModifiedSerieId").val())}let solvesIDs=[];$("#DeleteSerieButton").click(function(){let n=$("#SerieToDeleteId").val();$("#DeleteSerieModal").modal("hide");$.post("/SeriesAdmin/DeleteSerie",{serieId:n},function(n){ResponseCheck(n,HandleSerieDeleteResponse)})});$("#SaveModifChanges").click(function(){let n=CollectChangedData();$.post("/SeriesAdmin/ModifySerie",{model:n},function(n){ResponseCheck(n,HandleModificationResponse)})});$("#CloseModifModal").click(function(){$("#ModifyTimesModal").modal("hide");GetSeriesData(currentPage)});
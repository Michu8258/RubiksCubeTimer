function HandleResponse(n){let t=JSON.parse(n.responseText);t.isFaulted?DisplayMessages(n):location.reload()}function HandleDeserializedResponse(n){if(n.isFaulted){let t={};t.responseText=JSON.stringify(n);DisplayMessages(t)}else location.reload()}function SendNewOptionRequest(n){$.ajax({url:"/Categories/AddCategoryOption",contentType:"application/json",type:"POST",data:JSON.stringify(n),complete:function(n){HandleResponse(n)}})}function DeleteCategoryOption(n){$("#OptionToDelete").text(n);$("#DeleteOptionModal").modal("show")}function UpdateCategoryOption(n,t){$("#UpdateOptionId").val(n);$("#UpdateOptionInput").val(t);$("#ModifyOptionIssues").addClass("d-none");$("#UpdateOptionModal").modal("show")}function CheckIfOneSelected(n){let i=$("[id^="+n+"]"),r=0;for(var t=0;t<i.length;t++)i[t].checked&&r++;return r>=1}function SendNewCategoryRequest(n,t){let r=$("[id^="+t+"]"),u=[];for(var i=0;i<r.length;i++)r[i].checked&&u.push(r[i].name);$.post("/Categories/AddCategory/",{name:n,options:u,minimalDuration:$("#NewDuration1").val()},function(n){HandleDeserializedResponse(n)})}function DeleteCategory(n,t){$("#CategoryToDelete").text(t);$("#CategoryIdDelete").val(n);$("#DeleteCategoryModal").modal("show")}function ModifCategoryButt(n,t,i){$("#ModCategoryIssues").addClass("d-none");$("#ModCategoryIssuesOpt").addClass("d-none");$("#ModCategoryIssuesTime").addClass("d-none");$("#ModCategoryInput").val(t);$("#ModCategoryId").val(n);$("#NewDuration2").val(i);$("#ModCategoryOriginalName").text(t);$.get("/Categories/GetCategoryOptions",{identity:n},function(n){if(n.length>0){for(var t=0;t<n.length;t++){let i="OptionMID_"+n[t].replace(" ","_");$("#"+i).prop("checked",!0)}$("#ModCategoryModal").modal("show")}})}function SendModCategoryRequest(n,t,i){let u=$("[id^="+i+"]"),f=[];for(var r=0;r<u.length;r++)u[r].checked&&f.push(u[r].name);$.post("/Categories/ModifyCategory",{identity:n,newName:t,options:f,minimalDuration:$("#NewDuration2").val()},function(n){HandleDeserializedResponse(n)})}$("#AddOption").click(function(){$("#NewOptionInput").val("");$("#NewOptionIssues").addClass("d-none");$("#AddOptionModal").modal("show")});$("#ConfirmOptionAdd").click(function(){let n=$("#NewOptionInput").val();n.length<5||!/^[a-zA-Z0-9- ]*$/.test(n)?$("#NewOptionIssues").removeClass("d-none"):($("#NewOptionIssues").addClass("d-none"),$("#AddOptionModal").modal("hide"),SendNewOptionRequest(n))});$("#DeleteOptionButton").click(function(){let n=$("#OptionToDelete").text();$.ajax({url:"/Categories/DeleteCategoryOption",contentType:"application/json",type:"POST",data:JSON.stringify(n),complete:function(n){HandleResponse(n)}})});$("#ConfirmOptionModify").click(function(){let n=$("#UpdateOptionInput").val();if(n.length<5||!/^[a-zA-Z0-9- ]*$/.test(n))$("#ModifyOptionIssues").removeClass("d-none");else{let t=$("#UpdateOptionId").val();$("#ModifyOptionIssues").addClass("d-none");$("#UpdateOptionModal").modal("hide");$.post("/Categories/UpdateCategoryOption",{identity:t,name:n},function(n){HandleDeserializedResponse(n)})}});$("#AddCategory").click(function(){$("#NewCategoryIssues").addClass("d-none");$("#NewCategoryIssuesOpt").addClass("d-none");$("#NewCategoryIssuesTime").addClass("d-none");$("#NewCategoryInput").val("");$("#AddCategoryModal").modal("show")});$("#ConfirmCategoryAdd").click(function(){let t=$("#NewCategoryInput").val(),u=CheckIfOneSelected("OptionID_"),i=!1,r=!1,n=!1;t.length<5||!/^[a-zA-Z0-9- ]*$/.test(t)?$("#NewCategoryIssues").removeClass("d-none"):($("#NewCategoryIssues").addClass("d-none"),i=!0);u?($("#NewCategoryIssuesOpt").addClass("d-none"),r=!0):$("#NewCategoryIssuesOpt").removeClass("d-none");n=VerifyTime(1,$("#NewDuration1").val());n||$("#NewDuration1").val()==""?($("#NewCategoryIssuesTime").addClass("d-none"),n=!0):($("#NewCategoryIssuesTime").removeClass("d-none"),n=!1);i&&r&&n&&($("#AddCategoryModal").modal("hide"),SendNewCategoryRequest(t,"OptionID_"))});$("#DeleteCategoryButton").click(function(){let n=$("#CategoryIdDelete").val();$.post("/Categories/DeleteCategory",{identity:n},function(n){HandleDeserializedResponse(n)})});$("#ConfirmCategoryMod").click(function(){let t=$("#ModCategoryInput").val(),u=$("#ModCategoryId").val(),f=CheckIfOneSelected("OptionMID_"),i=!1,r=!1,n=!1;t.length<5||!/^[a-zA-Z0-9- ]*$/.test(t)?$("#ModCategoryIssues").removeClass("d-none"):($("#ModCategoryIssues").addClass("d-none"),i=!0);f?($("#ModCategoryIssuesOpt").addClass("d-none"),r=!0):$("#ModCategoryIssuesOpt").removeClass("d-none");n=VerifyTime(2,$("#NewDuration2").val());n||$("#NewDuration2").val()==""?($("#ModCategoryIssuesTime").addClass("d-none"),n=!0):($("#ModCategoryIssuesTime").removeClass("d-none"),n=!1);i&&r&&n&&($("#ModCategoryModal").modal("hide"),SendModCategoryRequest(u,t,"OptionMID_"))});